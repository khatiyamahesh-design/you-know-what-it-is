<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy New Year âœ¨</title>

<script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>

<style>
html,body{
  margin:0;
  height:100%;
  background:#070710;
  font-family:'Poppins',system-ui,sans-serif;
  overflow:hidden;
  color:#fff;
}

/* SCENES */
.scene{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  opacity:0;
}

.scene.active{ opacity:1; }

/* TEXT */
h1{
  font-size:44px;
  margin:6px 0;
  text-align:center;
}

p{
  font-size:18px;
  opacity:.85;
  text-align:center;
}

.glow{
  text-shadow:0 0 30px rgba(255,180,80,.95);
}

/* COUNTDOWN */
#countdown{
  font-size:96px;
  font-weight:700;
}

/* LIGHTS */
.light{
  position:absolute;
  width:8px;
  height:8px;
  border-radius:50%;
  background:gold;
}

/* CANVAS */
canvas{
  position:absolute;
  inset:0;
  z-index:1;
}

/* FINAL TEXT */
#finalText{
  position:relative;
  z-index:5;
  text-align:center;
  pointer-events:none;
}
</style>
</head>

<body>

<!-- SCENES -->
<div class="scene active" id="s1">
  <p>I made something smallâ€¦</p>
</div>

<div class="scene" id="s2">
  <h1 class="glow" id="name"></h1>
</div>

<div class="scene" id="s3">
  <p>Festival lights are coming alive ðŸª”</p>
</div>

<div class="scene" id="s4">
  <p>Just enjoy âœ¨</p>
</div>

<div class="scene" id="s5">
  <p>And here we goâ€¦</p>
</div>

<div class="scene" id="s6">
  <div id="countdown" class="glow">3</div>
</div>

<div class="scene" id="s7">
  <canvas id="fx"></canvas>
  <div id="finalText">
    <h1 class="glow">ðŸŽ† HAPPY NEW YEAR ðŸŽ†</h1>
    <h1 class="glow">Rii</h1>
    <p>
      May this year be bright,<br>
      full of good moments,<br>
      and festival energy all around ðŸª”
    </p>
  </div>
</div>

<script>
const scenes = document.querySelectorAll(".scene");

function show(i){
  scenes.forEach(s=>s.classList.remove("active"));
  scenes[i].classList.add("active");
}

/* CINEMATIC FLOW */
const tl = gsap.timeline();

tl.to("#s1",{opacity:1,duration:1})
  .to("#s1",{opacity:0,duration:.6,delay:1})

  .call(()=>show(1))
  .call(nameReveal)
  .to("#s2",{opacity:1,duration:1})
  .to("#s2",{opacity:0,duration:.6,delay:1})

  .call(()=>show(2))
  .call(festivalLights)
  .to("#s3",{opacity:1,duration:1})
  .to("#s3",{opacity:0,duration:.6,delay:1.2})

  .call(()=>show(3))
  .to("#s4",{opacity:1,duration:1})
  .to("#s4",{opacity:0,duration:.6,delay:1})

  .call(()=>show(4))
  .to("#s5",{opacity:1,duration:1})
  .to("#s5",{opacity:0,duration:.6,delay:1})

  .call(()=>show(5))
  .call(startCountdown)
  .to("#s6",{opacity:1,duration:.4})

  .call(()=>show(6))
  .call(festival)
  .to("#s7",{opacity:1,duration:1.5});

/* NAME ANIMATION */
function nameReveal(){
  const text="Hey Rii âœ¨";
  const el=document.getElementById("name");
  el.textContent="";
  let i=0;
  const t=setInterval(()=>{
    el.textContent+=text[i++];
    if(i===text.length) clearInterval(t);
  },120);
}

/* FESTIVAL LIGHTS */
function festivalLights(){
  for(let i=0;i<40;i++){
    const d=document.createElement("div");
    d.className="light";
    d.style.left=Math.random()*100+"vw";
    d.style.top=Math.random()*100+"vh";
    d.style.background=`hsl(${Math.random()*50+20},90%,60%)`;
    document.body.appendChild(d);
    gsap.to(d,{
      y:-120,
      repeat:-1,
      duration:Math.random()*4+3,
      ease:"sine.inOut"
    });
  }
}

/* COUNTDOWN */
function startCountdown(){
  const el=document.getElementById("countdown");
  let num=3;

  const interval=setInterval(()=>{
    num--;
    if(num===0){
      clearInterval(interval);
      gsap.to("#s6",{opacity:0,duration:.4});
    } else {
      el.textContent=num;
      gsap.fromTo(el,{scale:0.6},{scale:1,duration:0.5,ease:"back.out"});
    }
  },800);
}

/* FIREWORKS */
function festival(){
  const c=document.getElementById("fx");
  const ctx=c.getContext("2d");
  c.width=innerWidth;
  c.height=innerHeight;

  const particles=[];
  const safeZone=c.height/2;

  function burst(x,y){
    for(let i=0;i<40;i++){
      particles.push({
        x,y,
        vx:(Math.random()-.5)*6,
        vy:(Math.random()-.5)*6,
        life:80,
        col:`hsl(${Math.random()*50+20},90%,60%)`
      });
    }
  }

  setInterval(()=>{
    burst(Math.random()*c.width, Math.random()*(safeZone-120));
  },900);

  c.onclick=e=>burst(e.clientX,e.clientY);

  function draw(){
    ctx.fillStyle="rgba(7,7,16,.25)";
    ctx.fillRect(0,0,c.width,c.height);

    particles.forEach((p,i)=>{
      p.x+=p.vx;
      p.y+=p.vy;
      p.life--;
      ctx.fillStyle=p.col;
      ctx.fillRect(p.x,p.y,3,3);
      if(p.life<=0) particles.splice(i,1);
    });

    requestAnimationFrame(draw);
  }
  draw();
}
</script>

</body>
</html>
