<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>New Year âœ¨</title>

<script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>

<style>
html,body{
  margin:0;
  height:100%;
  background:#070710;
  font-family:'Poppins',system-ui,sans-serif;
  overflow:hidden;
  color:#fff;
}

#stage{
  position:fixed;
  inset:0;
}

.layer{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  opacity:0;
}

.layer.active{ opacity:1; }

h1{
  font-size:44px;
  margin:10px 0;
  text-align:center;
}

p{
  font-size:18px;
  opacity:.85;
  text-align:center;
}

.glow{
  text-shadow:0 0 25px rgba(255,180,80,.8);
}

.light{
  position:absolute;
  width:8px;
  height:8px;
  border-radius:50%;
  background:gold;
}

canvas{
  position:absolute;
  inset:0;
}
</style>
</head>

<body>

<div id="stage">

  <div class="layer active" id="s1">
    <p>I made something smallâ€¦</p>
  </div>

  <div class="layer" id="s2">
    <h1 class="glow" id="name"></h1>
  </div>

  <div class="layer" id="s3">
    <p>Festival lights are waking up ðŸª”</p>
  </div>

  <div class="layer" id="s4">
    <p>Tap anywhere âœ¨</p>
  </div>

  <div class="layer" id="s5">
    <p>Wait for itâ€¦</p>
  </div>

  <div class="layer" id="s6">
    <canvas id="fx"></canvas>
    <h1 class="glow">ðŸŽ† HAPPY NEW YEAR ðŸŽ†</h1>
    <h1 class="glow">Rii</h1>
    <p>
      May this year be bright,<br>
      full of good moments,<br>
      and festival energy all around ðŸª”
    </p>
  </div>

</div>

<script>
let scene = 1;
const total = 6;
const stage = document.getElementById("stage");

function show(n){
  document.querySelectorAll(".layer").forEach(l=>l.classList.remove("active"));
  document.getElementById("s"+n).classList.add("active");
}

gsap.from("#s1 p",{opacity:0,y:20,duration:1.2,ease:"power3.out"});

stage.addEventListener("click",advance);

function advance(){
  if(scene>=total) return;
  scene++;
  show(scene);

  if(scene===2) nameReveal();
  if(scene===3) lights();
  if(scene===4) tapBursts();
  if(scene===5) gsap.from("#s5 p",{scale:.8,opacity:0,duration:1});
  if(scene===6) festival();
}

function nameReveal(){
  const text="Hey Rii âœ¨";
  let i=0;
  const el=document.getElementById("name");
  el.textContent="";
  const t=setInterval(()=>{
    el.textContent+=text[i++];
    if(i===text.length) clearInterval(t);
  },120);
}

function lights(){
  for(let i=0;i<40;i++){
    const d=document.createElement("div");
    d.className="light";
    d.style.left=Math.random()*100+"vw";
    d.style.top=Math.random()*100+"vh";
    d.style.background=`hsl(${Math.random()*50+20},90%,60%)`;
    stage.appendChild(d);
    gsap.to(d,{
      y:-120,
      repeat:-1,
      duration:Math.random()*4+3,
      ease:"sine.inOut"
    });
  }
}

function tapBursts(){
  stage.onclick=e=>{
    for(let i=0;i<20;i++){
      const b=document.createElement("div");
      b.className="light";
      b.style.left=e.clientX+"px";
      b.style.top=e.clientY+"px";
      stage.appendChild(b);
      gsap.to(b,{
        x:(Math.random()-0.5)*200,
        y:(Math.random()-0.5)*200,
        opacity:0,
        duration:1,
        onComplete:()=>b.remove()
      });
    }
  };
}

function festival(){
  stage.onclick=null;
  const c=document.getElementById("fx");
  const ctx=c.getContext("2d");
  c.width=innerWidth;
  c.height=innerHeight;
  const p=[];
  function burst(x,y){
    for(let i=0;i<40;i++){
      p.push({
        x,y,
        vx:(Math.random()-.5)*6,
        vy:(Math.random()-.5)*6,
        life:70,
        col:`hsl(${Math.random()*50+20},90%,60%)`
      });
    }
  }
  setInterval(()=>burst(Math.random()*c.width,Math.random()*c.height*.6),900);
  c.onclick=e=>burst(e.clientX,e.clientY);

  function draw(){
    ctx.fillStyle="rgba(7,7,16,.25)";
    ctx.fillRect(0,0,c.width,c.height);
    p.forEach((o,i)=>{
      o.x+=o.vx;o.y+=o.vy;o.life--;
      ctx.fillStyle=o.col;
      ctx.fillRect(o.x,o.y,3,3);
      if(o.life<=0)p.splice(i,1);
    });
    requestAnimationFrame(draw);
  }
  draw();
}
</script>

</body>
</html>
