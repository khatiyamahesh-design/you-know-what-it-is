<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>New Year âœ¨</title>

<!-- GSAP -->
<script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>

<style>
html,body{
  margin:0;
  height:100%;
  background:#0b0b14;
  font-family:'Poppins',system-ui,sans-serif;
  color:#fff;
  overflow:hidden;
}

.layer{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  opacity:0;
  pointer-events:none;
}

.layer.active{
  opacity:1;
  pointer-events:auto;
}

h1,h2,p{margin:10px 0;text-align:center;}

.tap{
  opacity:.8;
  animation:pulse 1.2s infinite;
}

@keyframes pulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.1)}
}

button{
  padding:14px 32px;
  border-radius:30px;
  border:none;
  background:linear-gradient(135deg,#ffb703,#fb8500);
  font-size:16px;
  cursor:pointer;
}

.light{
  position:absolute;
  width:12px;
  height:12px;
  border-radius:50%;
  background:gold;
}

#festivalText{
  position:absolute;
  z-index:5;
  text-align:center;
}

#festivalText h1{
  font-size:42px;
}

#festivalText p{
  font-size:18px;
  opacity:.9;
}

canvas{
  position:absolute;
  inset:0;
}
</style>
</head>

<body>

<!-- LAYERS -->
<div class="layer active" id="l1">
  <h2 class="tap">Tap to start âœ¨</h2>
</div>

<div class="layer" id="l2">
  <h1 id="name"></h1>
</div>

<div class="layer" id="l3">
  <p>Festival lights are coming on ðŸª”</p>
</div>

<div class="layer" id="l4"></div>

<div class="layer" id="l5">
  <p>Tap the sparkles âœ¨</p>
</div>

<div class="layer" id="l6">
  <h2>Ready?</h2>
</div>

<div class="layer" id="l7">
  <canvas id="fx"></canvas>
  <div id="festivalText">
    <h1>ðŸŽ† HAPPY NEW YEAR ðŸŽ†</h1>
    <h2>Rii âœ¨</h2>
    <p>May this year be bright, fun,<br>and full of good moments ðŸª”</p>
  </div>
</div>

<script>
let current = 1;
const layers = n => document.getElementById("l"+n);

document.body.addEventListener("click",()=>{
  if(current===1) next();
});

function next(){
  gsap.to(layers(current),{opacity:0,duration:.4});
  current++;
  layers(current).classList.add("active");
  gsap.fromTo(layers(current),
    {opacity:0,scale:.9},
    {opacity:1,scale:1,duration:.6,ease:"power3.out"}
  );

  if(current===2) nameReveal();
  if(current===4) floatingLights();
  if(current===5) sparkleGame();
  if(current===7) festival();
}

function nameReveal(){
  const text="Hey Rii ðŸŒ¸";
  let i=0;
  const el=document.getElementById("name");
  const t=setInterval(()=>{
    el.textContent+=text[i++];
    if(i===text.length){
      clearInterval(t);
      setTimeout(next,700);
    }
  },120);
}

function floatingLights(){
  for(let i=0;i<30;i++){
    const d=document.createElement("div");
    d.className="light";
    d.style.left=Math.random()*100+"vw";
    d.style.top=Math.random()*100+"vh";
    d.style.background=`hsl(${Math.random()*50+20},90%,60%)`;
    document.getElementById("l4").appendChild(d);
    gsap.to(d,{
      y:-100,
      repeat:-1,
      duration:Math.random()*3+3,
      ease:"sine.inOut"
    });
  }
  setTimeout(next,2000);
}

let hits=0;
function sparkleGame(){
  for(let i=0;i<12;i++){
    const s=document.createElement("div");
    s.className="light";
    s.style.left=Math.random()*90+"vw";
    s.style.top=Math.random()*80+"vh";
    document.getElementById("l5").appendChild(s);
    gsap.to(s,{scale:1.6,repeat:-1,yoyo:true,duration:.6});
    s.onclick=()=>{
      s.remove();
      hits++;
      if(hits>=6) setTimeout(next,500);
    };
  }
}

function festival(){
  const c=document.getElementById("fx");
  const ctx=c.getContext("2d");
  c.width=innerWidth;
  c.height=innerHeight;
  const p=[];
  function burst(x,y){
    for(let i=0;i<40;i++){
      p.push({
        x,y,
        vx:(Math.random()-.5)*6,
        vy:(Math.random()-.5)*6,
        life:60,
        col:`hsl(${Math.random()*50+20},90%,60%)`
      });
    }
  }
  setInterval(()=>burst(Math.random()*c.width,Math.random()*c.height*.6),800);
  c.onclick=e=>burst(e.clientX,e.clientY);

  function draw(){
    ctx.fillStyle="rgba(10,5,20,.2)";
    ctx.fillRect(0,0,c.width,c.height);
    p.forEach((o,i)=>{
      o.x+=o.vx;o.y+=o.vy;o.life--;
      ctx.fillStyle=o.col;
      ctx.fillRect(o.x,o.y,3,3);
      if(o.life<=0)p.splice(i,1);
    });
    requestAnimationFrame(draw);
  }
  draw();
}
</script>

</body>
</html>
